/* Image Container Fixes - Ensures images adapt to container size, not vice versa */

/* Base image rule - images should respect container dimensions */
/* But exclude form elements, icons, and decorative images that should maintain their size */
img:not(.xb-item--icon img):not(.xb-contact-form img):not(form img):not(.xb-input-field img):not(.xb-select-field img):not(.xb-select-file img):not(.xb-massage-field img):not(.xb-icon img):not(.form-btn img) {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Only constrain images INSIDE containers that have explicit dimensions */
/* Don't set width/height on containers themselves - let them size naturally */

/* Images inside .xb-img containers should fill the container */
.xb-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
  max-width: 100%;
  max-height: 100%;
}

/* Images inside .img-hove-effect should fill the container */
.img-hove-effect .xb-img img,
.img-hove-effect img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  max-width: 100%;
  max-height: 100%;
}

/* Containers should only have overflow and positioning, not forced dimensions */
/* But prevent them from expanding beyond their intended size */
.xb-img {
  overflow: hidden;
  position: relative;
  max-width: 100%;
  max-height: 100%;
}

.img-hove-effect {
  overflow: hidden;
  position: relative;
  max-width: 100%;
  /* Don't set height - let it be determined by content or explicit CSS */
}

/* Project image containers - only constrain images, not containers */
.xb-project-img {
  overflow: hidden;
  position: relative;
}

.xb-project-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Single item image containers - must have constrained dimensions */
.single-item-image {
  overflow: hidden;
  position: relative;
  /* Prevent container from expanding - use flex-basis or max-width */
  max-width: 100%;
  flex: 0 1 auto; /* Don't grow, can shrink, auto basis */
  /* Ensure container doesn't expand beyond image - use aspect ratio if needed */
}

.single-item-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  /* Prevent image from expanding container */
  max-width: 100%;
  max-height: 100%;
}

/* If container has explicit dimensions, images should fill it */
.single-item-image:has(img) {
  display: flex;
  align-items: stretch;
}

.single-item-image .xb-img {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: stretch;
}

/* Service gallery containers should share space equally */
.service-gallary .single-item-image {
  flex: 1 1 0; /* Equal flex basis, can grow/shrink */
  min-width: 0; /* Allow shrinking below content size */
  max-width: 100%;
  /* Prevent height expansion - constrain to reasonable aspect ratio */
  aspect-ratio: 4 / 3; /* Adjust based on design needs */
  height: auto;
}

.service-gallary .single-item-image .xb-img {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

/* Image items in general */
.xb-image-item {
  overflow: hidden;
  position: relative;
}

.xb-image-item .xb-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Background images should not affect layout */
.about-bg img,
.bg_img img {
  width: 100%;
  height: auto;
  object-fit: cover;
}

/* Icon images - maintain aspect ratio but fit container */
.xb-item--icon img,
.xb-item--icon {
  width: auto;
  height: auto;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

/* Video elements should respect containers that have explicit dimensions */
/* Don't force dimensions on .xb-video itself - let main.css handle it */
.xb-video video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Inline images (like GIFs in text) should not break layout */
span img,
.title img,
h1 img,
h2 img,
h3 img {
  display: inline-block;
  vertical-align: middle;
  max-width: 100%;
  height: auto;
  max-height: 1.2em; /* Prevent huge inline images */
}

/* About top image containers - prevent expansion */
.about-top-image > div {
  max-width: 100%;
  flex: 0 1 auto;
  min-width: 0;
}

.about-top-image .img-hove-effect {
  max-width: 100%;
  width: auto; /* Let it size naturally based on content or explicit CSS */
}

/* Prevent image containers from expanding beyond their parent */
/* Only target specific image container classes, not all classes with "img" or "image" */
.xb-img,
.img-hove-effect,
.single-item-image,
.xb-project-img,
.xb-image-item,
.xb-about-img-item,
.xb-about-img-wrap {
  max-width: 100%;
  box-sizing: border-box;
}

/* Exclude form containers and other non-image elements */
.xb-contact-form,
.xb-contact-input-form,
.xb-contact-wrap,
form,
input,
textarea,
select {
  /* Reset any image-related rules that might affect forms */
  max-width: none;
  box-sizing: border-box;
}

/* Form icons should maintain their original size - don't apply image container rules */
.xb-input-field img,
.xb-select-field img,
.xb-select-file img,
.xb-massage-field img,
.xb-contact-form .xb-input-field img,
.xb-contact-form .xb-select-field img,
.xb-contact-form .xb-select-file img,
.xb-contact-form .xb-massage-field img,
.xb-contact-input-form .xb-input-field img,
.xb-contact-input-form .xb-select-field img,
.xb-contact-input-form .xb-select-file img,
.xb-contact-input-form .xb-massage-field img,
.form-btn img,
.xb-icon img {
  width: auto !important;
  height: auto !important;
  max-width: none !important;
  max-height: none !important;
  object-fit: none !important;
  display: inline-block !important;
  position: absolute !important;
}

/* Responsive image containers */
@media (max-width: 991px) {
  .xb-img img,
  .img-hove-effect img {
    object-fit: cover;
  }
}
